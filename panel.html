<link rel="stylesheet" type="text/css" href="bower_components/codemirror/lib/codemirror.css">
<link rel="stylesheet" type="text/css" href="panel.css"/>
<script type="text/javascript" src="bower_components/js-beautify/js/lib/beautify.js"></script>
<script type="text/javascript" src="bower_components/js-beautify/js/lib/beautify-css.js"></script>
<script type="text/javascript" src="bower_components/codemirror/lib/codemirror.js"></script>
<script type="text/javascript" src="bower_components/angular/angular.js"></script>
<script type="text/javascript" src="bower_components/angular-ui-codemirror/ui-codemirror.js"></script>
<script type="text/javascript" src="bower_components/codemirror/mode/javascript/javascript.js"></script>
<script type="text/javascript" src="bower_components/codemirror/mode/css/css.js"></script>
<script src="panel.js"></script>

<div ng-app="switch" ng-controller="PanelCtrl">

  <div ng-if="!selectedRequest && !requests.length" class="disclaimer">
    <h1>Welcome to genius-switch</h1>

    You may need to reload the page for your requests to appear here.
  </div>

  <div ng-if="!selectedRequest && requests.length" class="content">
    <div class="menu">
      <div class="pull-right">
      </div>

      <div class="selected-request-url">
        genius-switch!
      </div>
    </div>

    <div class="editor">
      <div ng-if="!selectedRequest" ng-repeat="request in requests" class="content">
        <div class="mocked-request" ng-click="selectRequest(request)" ng-class="{mocked:request.mocked}">
          {{ request.request.url }}
        </div>
      </div>
    </div>
  </div>

  <div ng-if="selectedRequest" class="content">
    <div class="menu">
      <div class="pull-right">
        <button ng-click="unmockSelected()" class="btn btn-danger" ng-if="selectedRequest.mocked">{{ 'unmock' | i18n }}</button>
        <button ng-click="beautifySelected()" class="btn" ng-if="is_beautifiable()">{{ ('cleanup_' + selectedRequest.mode) | i18n }}</button>
        <button ng-click="saveSelectedRequest()" class="btn">{{ 'save' | i18n }}</button>
      </div>

      <div class="selected-request-url">
        <a ng-click="cancelSaving()" class="back">X</a>
        {{ selectedRequest.request.url }}
      </div>
    </div>
    <ui-codemirror ng-model="editor.body" ui-codemirror-opts="editorOptions()" class="editor"></ui-codemirror>
  </div>

</div>
